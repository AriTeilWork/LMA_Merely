<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MerelyApp.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Markdown Editor">

    <Grid RowDefinitions="Auto, *, Auto" Padding="20">

        <!-- Top bar: File button, checkbox+label, spacer, Notes button -->
        <Grid Grid.Row="0" ColumnDefinitions="Auto,Auto,*,Auto" VerticalOptions="Center" HorizontalOptions="FillAndExpand">
            <Button Grid.Column="0" Text="File" Clicked="OnFileClicked" VerticalOptions="Center" />

            <HorizontalStackLayout Grid.Column="1" Spacing="8" VerticalOptions="Center">
                <CheckBox
                    x:Name="PreviewCheckBox"
                    CheckedChanged="OnPreviewCheckChanged"
                    VerticalOptions="Center" />
                <Label
                    Text="Preview mode"
                    VerticalOptions="Center"
                    Margin="0,0,0,0" />
            </HorizontalStackLayout>

            <!-- Spacer column is grid column 2 -->

            <Button Grid.Column="3" Text="Notes" Clicked="OnOpenNotesClicked" VerticalOptions="Center" />
        </Grid>

        <Editor
            x:Name="MarkdownEditor"
            Grid.Row="1"
            TextChanged="OnMarkdownTextChanged"
            FontSize="16"
            AutoSize="TextChanges"
            />

        <WebView
            x:Name="MarkdownPreview"
            Grid.Row="1"
            IsVisible="False"
            HeightRequest="900" />

        <Button
            Text="Save"
            Grid.Row="2"
            HeightRequest="45"
            HorizontalOptions="End"
            Clicked="OnSaveClicked" />

    </Grid>
</ContentPage>

<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="MerelyApp.NotesBoardPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:data="clr-namespace:MerelyApp.Data"
    Title="Notes">

    <StackLayout Padding="20" Spacing="12">
        <HorizontalStackLayout HorizontalOptions="FillAndExpand">
            <Label Text="Your Notes" FontSize="20" VerticalOptions="Center" />
            <Button Text="New Note" Clicked="OnAddNewNoteClicked" HorizontalOptions="EndAndExpand" />
        </HorizontalStackLayout>

        <CollectionView x:Name="NotesList" SelectionMode="None">
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="data:Note">
                    <Frame Padding="10" Margin="0,4" HasShadow="True">
                        <Grid ColumnDefinitions="*,Auto" RowDefinitions="Auto,Auto">
                            <StackLayout Grid.Column="0">
                                <Label Text="{Binding Title}" FontAttributes="Bold" />
                                <Label Text="{Binding UpdatedAt, StringFormat='Updated: {0:G}'}" FontSize="12" TextColor="Gray" />
                            </StackLayout>

                            <HorizontalStackLayout Grid.Column="1" VerticalOptions="Center" Spacing="6">
                                <Button Text="Open" Clicked="OnOpenNoteClicked" BindingContext="{Binding .}" />
                                <Button Text="Rename" Clicked="OnRenameNoteClicked" BindingContext="{Binding .}" />
                                <Button Text="Delete" Clicked="OnDeleteNoteClicked" BindingContext="{Binding .}" />
                            </HorizontalStackLayout>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </StackLayout>
</ContentPage>